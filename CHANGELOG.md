### 1й этап (декабрь 2022 - апрель 2023)
- дефолтная превьюшка теперь может быть полностью прозрачной и это контролируется через соответствующую настройку
- теперь программа сворачивается в трей, когда окно закрывается. Сделано это для того, чтобы при каждом запуске не пришлось ожидать долгой загрузки папок сессии из библиотеки
- в меню трея программа выводит статистику сожранной памяти
- иконки у панели управления теперь расположены на затенённом фоне, что облегчит их нахождение, когда просматривается светлая картинка
- перерисованы кнопки увеличения и уменьшения масштаба на панели управления
- доработка lite mode:
    - теперь можно выйти в lite mode не только для папки, но и для текущей картинки и доступно через контекстное меню. При этом окно новой копии программы в lite mode открывается по возможности на другом мониторе
- в контесное меню превьюшек добавлена опция сканирования папки в глубину: при сканировании в глубину будут добавлены не только изображения в текущей папке, но и в её подпапках тоже. Опция сохраняется в файле сессии и даёт эффект при первоначальной загрузке и при принудительном обновлении папки
- приложение научилось определять когда оно запускается из Sublime Text
- добавлена история просмотра картинок
    - историю просмотра отображает второй ряд мелких превьшек, расположенный сверху
    - стрелка + Alt для возвращения к предыдущей показанной картинке
    - история может быть либо для одной папки, либо для всех сразу (глобальная история), есть соотвествующая настройка
    - при достижении краёв списка истории выдаётся сообщение
- выполнен рефакторинг отдельных частей программы
    - settings api
    - разнёс код из главного файла по другим новым файлам
    - отрисовка мелких превьюшек
    - код сокетов
    - QMovie переписан, чтобы анимированный контент отображался не через костыльный QLabel, а через отрисовку, как это сделано для статических изображений
- сделана затухающая подцветка центрального лейбла в стиле начала глав Half Life 2, чтобы можно было понять, обновляется ли сообщение или нет
- добавлена настройка для размера превьюшек во вьювере
- теперь изображения стремятся занять максимально возможное пространство экрана благодаря использованию функции fit
- нарисована иконка по подобию Chromium в Photoshop. Потом переделаю её в Blender
- для целей отладки в левом верхнем углу выводится инфа из стандартного выхода, это можно отключить в настройках
- теперь если клавиша перелистывания изображений зажата, то отменяется анимация, которая в таком случае замедляет перелистывание. Вдобавок вообще для любого значения пропускается интерполяция, если начальные и конечные значения совпадают, и в итоге опять же избавляемся от задержки листания при зажатой клавише
- нажатие на Esc сначала закрывает окно с настройками, если оно открыто, и только при повторном нажатии закрывается само приложение
- добавлена настройка для запуска в трей, при чём в таком случае окно не показывается сразу, а только после клика по иконке трея, и тогда показывается окно со стартовой заглушкой (стартовая страница), которая приглашает к выбору папки для просмотра.
- в настройках перереработан вид чекеров: теперь ясно видно, что отключено, а что включено
- повороты теперь реализованы за счёт поворота самой картинки в памяти, а не за счёт поворота холста
- переработана функция кадрирования, доступная через клавишу R или R+Shift. Под эту функцию в настройках добавлена строка для пути, по которому будут сохраняться кадрированные изображения. R+Ctrl даст сбросить текущий путь и задать новый
- прога теперь может показывать метадату во вьювере, если таковая имеется в файле изображения. Для этого в настройки добавлена соответствующая галочка
- появился скролл колесом на странице библиотеки для каждой колонки и отрисовка некликабельных скроллбаров
- кадрирование теперь может работать с кадрами из анимированных картинок
- теперь можно задавать прямоугольную область интереса на изображении и добавлять к ней комментарий
- доработан UX просмотра анимированного контента
    - при перелистывании на другую картинку программа запоминает стояла ли анимация на паузе или нет
    - более удобная покадровая прокрутка через зажатую левую кнопку мыши
- появилась возможность растягивания программы на два монитора на странице библиотеки, в итоге левый столбец расположится на первом мониторе, а правый столбец - на втором
- появилась возможность перемещать полноэкранное окно с монитора на монитор с помощью Ctrl+стрелка
- по просьбе добавлена визуальная фича для антуража, которая делит пространство на квадраты, прозрачность которых плавно и рандомно меняется как в загрузочной заставке Splinter Cell Black List. Любой такой квадрат будет возвращаться к полной прозрачности, если над ним находится курсор мыши
- теперь перед открытием вьювера для конкретной папки или для конкретного изображения программа покажет стартовый диалог, в котором можно будет выбрать вариант открыть приложение в лайтовом режиме или вариант открыть в обычном, когда перед непосредственным открытием окна в самом начале много времени уходит на сканирование папок сессии добавленных в библиотеку
- в лайтовом режиме теперь отключена отрисовка комментов


### 2й этап (май 2023 - 28 сентября 2023)
- Стартовый диалог теперь имеет третью опцию — «Закрыть». Она позволяет вообще не запускать программу. Клик по крестику в углу делает то же самое
- Теперь svg-файлы (расширения `.svg`, `.svgz`) растеризуются в приемлемом разрешении, которое можно изменять через пункт контестного меню «Изменить разрешение растеризации SVG-файла»
- Добавлена настройка «Запускать лайтовый режим сразу и без диалога»
    - это позволяет пропускать диалог выбора режима упрощённый или обычный (библиотечный)
    - перезапуститься из лайтового в обычный режим можно через команду контекстного меню
- В контестное меню добавлена команда «Перезапуск» для сброса лишней памяти
    - если была открыта библиотека, то при перезапуске тоже будет открыта библиотека
- В файл `history.log` в папке программы теперь прописывается все запросы к приложению с датой и путём до запрашиваемых картинки или папки
- UX: теперь активация Scroll Lock через одноимённую клавишу переносит функционал клавиш WASD на клавиши со стрелками
- В контекстном меню появилась команда **Свернуть** для сворачивания окна, собственно
- !!!! ***обнаружен баг: после предварительного сворачивания через сочетание Win+Key Down при разворачивании кликом мышки по панели задач адекватно не появляется рамка у окна. Решения пока найти не удалось. Попытки решить прописаны в методе changeEvent. Код в changeEvent на данный момент вызывает бесконечный цикл и внезапно баги даже в окнах других приложений***
- Исправлен баг с залипанием нажатой левой клавиши при переходе окна в режим "с рамкой"
- Исправлен баг, когда при отсутствии повёрнутого изображения сообщение о отсутствии изображения показывалось с тем же поворотом, какое было у самого изображения
- Добавлена возможность менять местами порядок миниатюрок в той части ряда панели управления, что видна на мониторе. Работает через зажатие левой кнопки мыши.
- Добавлена система тегов:
    - при наведении мышки к левому краю во вьювере появится панель, на которой будут отображены все теги для данного изображения
    - через клавишу T доступна форма задания тегов и создания новых, прятается она через клавишу Esc. Щелкнув правой кнопкой мыши по лейблу тега отмеченные им изображения можно посмотреть в сгенерированной html-странице
    - для каждого тега система хранит два файла в папке tagging: первый содержит имя тега и его описание, второй содежит список файлов
- Из-за того, что клавиша T теперь используется в системе тегов, включить и выключить трети отныне можно с помощью клавиши D
- Теперь при перелистывании есть возможность видеть файлы любого типа, если в настройках деактивирована галочка **Показывать только изображения**. Фича нужна для того, чтобы иметь возможность замечать в папках с изображениями лишние файлы. Уже сейчас содержимое текстовых файлов (`.log`, `.txt`, `.url`, `.ini`) отображается в плашке об ошибке, которая выводится заместо картинки.
- Пофиксил баги для фичи перемещения миниатюрок
- Пофиксил баг с unicode
- !!!! ***Заметил кое-что важное: разрабатывая программу лишь несколько дней в месяц я стал забывать что и когда сделано, и недавно сделал фигню, например, не сделал модальными всплывающие окна настроек, комментария и тегов. Когда сделал, это решило кучи проблем с UX***
- Все формы (форма настроек, форма тегов, форма комментария) теперь модальные. Клавишей Esc каждую из них можно закрыть
- В форме тегов при клике по лейблам тегов теперь не возбуждается (не показывается назойливо) Completer в текством поле
- Кнопки поворота картинки поменяны местами на панели управления
- Отражать картинку во вьювере теперь можно и по вертикали, для этого нужно лишь зажать Ctrl перед нажанием клавиши M
- Создавая фичу, благодаря которой можно увидеть в списке не только картинки в папке, но и другие файлы, я забыл выключить для этих НЕкартинок вычисление md5-хэша. Из-за этого например, при попытке открыть картинку в папке, в которой лежало ещё и видео размером 500 МБ, время загрузки увеличилось почти на 3 секунды. Это нужно было исправлять, и сейчас это всё исправлено. Файлы, у которых md5-хэш не вычисляется, по сути не считаются картинками, и из-за этого теперь их нельзя добавлять даже в избранное.
- Теперь программа может читать AVIF, HEIF и HEIC-файлы
- Теперь при увеличении с 1% в большую сторону картинка некоторое время будет центироваться на позиции курсора. Это сделано для того, чтобы она резко не вылетела за края окна (из области видимости)
- Надпись стартовой страницы больше не мелькает на доли секунды при открытии изображения из проводника. Надпись "Загрузка" теперь выдаётся сразу на нескольких языках, а не на рандомном одном
- Теперь миниатюрки создаются по очереди в обе стороны от текущей миниатюрки, что в результате даёт приятный анимационный эффект, который в Picasa Photo Viewer ещё украшен постепенным масштабированием каждой миниатюрки по диагонали. Здесь от лишних анимационных украшений пришлось отказаться, потому что на Python летать (работать без фризов) это не будет, поэтому вышло скромней. Но всё равно ещё одна частичка Picasa Photo Viewer передана. Раньше превьюшки создавались в порядке следования - строго от первой до последней, не учитывая положение текущей превьюшки.
- Миниатюры в нижней части вьювера теперь проскальзывают при листании изображений как в Picasa Photo Viewer. Однако из-за долгой прогрузки самих картинок для подготовки к показу в главном потоке приложения, анимация иногда задерживается. Эта анимация вырубается через общую настройку для всех анимаций. Во время этой таски пришлось рефакторить систему анимации.
- Теперь при масштабировании изображения исключены резкие скачки. Для желающих вернуться к прежнему методу масштабирования в настройках появился соответствующий пункт. (и 5 ноября он уже удалён)
    Новый метод работает за счёт добавления к исходной ширине или вычитания из исходной ширины картинки дробной величины от всё той же исходной ширины, а затем по исходной ширине и новой ширине вычисляется параметр масштабирования. Перед этим я хотел делать интерполяцию по прямым от позиции мышки до углов прямоугольника (или до центра картинки, хотя центр картинки), но не стал.
- Система анимации аттрибутов отрефакторена ещё раз. Теперь все анимиационные таски прокручивает один единственный таймер, чтобы сообщения от множества таймеров не захламляли очередь сообщений
- Пофиксил баг: в лайтовом режиме при закрытии окна не воспроизводилась анимация закрытия
- Набор поддерживаемых текстовых файлов расширен, добавлена поддержка .pyw-, .py- и .bat-файлов
- Появился анимированный зум, прям как в Picasa Photo Viewer. Он включён в настройках по умолчанию. Вдобавок зум старается прилипнуть к значению 100% при уменьшении и увеличении масштаба.
- Восстановлена работа фичи SlideShow
- При запуске обычного режима иконка приложения в трее отображется сразу, а не после прогрузки библиотеки
- Обновлена иконка приложения, как и планировалось
- Переписал документацию и текст в UI. Теперь вьювер, библиотека и PureRef(Boards) это страницы, а не режимы. А режимов только два - обычный и лайтовый (упрощённый)
- Исправлен баг. Из-за бага при краше аппликуха перезапускалась чистой без открытой ранее картинки
- Теперь в обычном режиме иконка в трее анимируется во время прогрузок папок
- Режим слайдшоу получил ещё один багфикс: теперь смена последней картинки в списке на первую происходит бесшовно без неприятного эффекта имевшего место
- Исправлены несколько багов:
    - На странице библиотеки приложение больше не крашится, если отображается битый avif-файл, к тому для всех картинок, которые не могут быть отображены пишется не только слово "Ошибка", а ещё и название файла для информативности
    - Если из проводника затребовали папку или изображение к показу, то произойдёт принудительнео переключение со страницы "Библиотека" на страницу "Вьювер"
    - Справке F1 добавлена прокрутка
    - Приняты меры к устранению дубликатов папок в библиотеке
- Внешний вид формы тегов улучшен
- Все пользовательские данные (сессия, избранное, комментарии, теги, настройки) теперь находятся в папке user_data, а не разбросаны хаотично по всей папке приложения
- Отрефакторил весь код, относящийся к комментированию. Теперь весь код коментов сидит в своём модуле и не размазан по `library_data.py`. Заодно вспомнил, что отключил лишь отображение коментов в лайтовом режиме, а редактирование и создание не отключил совсем. Ещё примечательно, что я хоть и создавал коменты в упрощённом режиме, но старые коменты от этого не перетёрлись и остались. Стабильный кусок кода получился. Вообще я отрубил комменты тогда именно потому, что их загрузка отнимала время, ведь все комменты хранятся в одном файле и их загрузка потребует загрузки и самих изображений, к которым они относятся, а это не гуд для упрощённого (лайтового) режима.
- Пофиксил тулзу кадрирования картинок после рефакторинга
- Отрефакторил код показа центрального лейбла. Заодно исправил баг, когда задание скорости анимации или номера кадра внезапно срабатывали на статической картинке и заставляли прорграмму падать. Вдобавок убрал краш, когда показывается значение скорости или кадра и, при перелистывании картинки, не успев исчезнуть, этой информации все ещё приходится отображаться на соседней статической картинке
- Центральный лейбл теперь может отображать сообщения об ошибках красным цветом букв
- Значение масштаба больше не отображается при попытке зумить картинку, которая выкинула ошибку
- Появилась возможность оперативно переключится между вьювером, библиотекой, pureref-досками (boards) и стартовой страницей через красную угловую кнопку слева вверху. При наведении на кнопку выскочит меню для выбора нужной страницы приложения. Клавиша TAB теперь циклически переключает страницы с одной на другую
- Наконец запилил фичу пермещения миниатюрок местами. Что нужно знать:
    - Ctrl + клик по одной миниатюрке даёт выбрать её для перемещния или исключить из выбора
    - Также если зажать Ctrl и тащить зажатую левую кнопку мыши, то прямоугольником выделения можно выбрать сразу несколько миинатюрок или исключить несколько из выбора
    - На время всех этих манипуляций прозрачность ряда минатюрок становится полностью нулевой, то есть их хорошо видно
    - Выделение прямоугольником теперь можно начинать из зоны главного окна, всё будет работать идеально, специально убил на это час
    - Убрал баг, из-за которого случайно можно было бы кликнуть по миниатюрке так, что вьювер переключался на неё и весь ряд съезжал
    - В любой момент, если есть хотя бы одна выделенная миниатюрка, её можно вставить в то место, где появляется красный курсор. Он появляется между изображениями, в начале и в конце ряда
- UX: Миниатюры и превьшки папок, видимые на странице библиотеки, теперь создаются по порядку, начиная с первой, чтобы как можно раньше можно было видеть ряд миниатюрок каждой папки. Для вьювера осталось всё как было - превьюшки создатся по порядку в обе стороны начиная от текущей превьюшки в момент открытия папки.
- UX: Усовершенствован модуль комментариев. Теперь если во вьювер поступает запрос на показ картинки, то он проверяет, нет ли комментариев к этой картинке. Если оин есть, то у каждого комента путь к картинке проверяется на доступность. Если такого пути не сущестует более, то путь будет заменён на путь текущей открытой во вьювере картинки. В центральном лейбле вылезет сообщение, что картинка найдена и база обновлена. Картинка тот же час будт добавлена в папку с комментариями в библиотеке
- В контестном меню панели управления после вручую перемещнных миниатюрок теперь пропадает галочка на любом из типов сортировки, как это и должно быть по логике.
- Справка F1: текст справки для текущей страницы теперь всегда пишется впереди текста всех остальных страниц
- Порядок изображений можно сохранить в скрытый файл папки через команду контекстного меню панели управления. А если активирована соответствующая настройка, сохранение произойдёт автоматически
- Исправлен баг: Была ситуация, когда запрашиваемой картинки по факту не было и прога отскочила на стартовую страницу. Высветилось сообщение, что пути не существует. Потом я решил перейти во вьювер и увидел, что хоть папка для показа нашлась (папка с комментариями), но для ней не сгенерились превьюшки. Вот теперь они генерятся
- Папки с коментами и избранным теперь запрещено обновлять через кнопку на панели управления, да и вообще нельзя их обновлять. При попытке это сделать вылезет сообщение об ошибке
- UX: Текстовые сообщения в центре теперь задерживаются дольше для возможности прочтения
- Исплавлен баг из-за невнимательного кодинга: после выхода из библиотеки во вьювер не работали трансформации
- Исправлен баг из-за невнимательного кодинга: теперь миниатюрка не подсвечивается под курсором мыши, если курсор мыши в данный момент находится на одной из кнопок панели управления
- История просмотра в самом верху теперь отображается только когда курсор находится у верхушки окна
- Стал доступен полноэкранный режим для панели управления. В этом режиме кнопки и вспомогательный текст скрываются, видно только миниатюрки. В этом режиме намного проще менять порядок этих превьюшек рукопашно, собственно, поэтому полноэкранный режим и был внедрён. Режим запускается через контекстное меню панели управления. В полноэкраннном режиме доступна прокрутка через колесо мыши


### 3й этап (28 сентября 2023 - 31 октября 2023)
- BOARDS (ранее PureRef, интерактивный коллаж)
    - запилено перемемещение и масштабирование доски через мышку
    - запилена отрисовка фреймов картинок и предварительное расположение их айтемами в один ряд, во фрейме айтема пишется разрешение и название файла
    - написаны функции сохранения и восстановления контекста доски (положение вьюпорта, масштаб), которые вызываются при смене папки и при смене страницы
    - клик по миниатюрке в панели управления теперь центрирует камеру на картинке этой миниатюрки
    - при наведении на минитюрку в лейбле панели управления будет отображаться имя файла, его разрешение и название папки
    - ряд миниатюр не центрируется вокруг текущей картинки в папке и его можно скролить мышкой влево или вправо
    - исправлена надпись для процесса подготовки доски, буквы сделаны больше и увеличено расстояние между ними
    - улучшен внешний вид компаса
- Запретил менять страницы, если программа обрабатывает запрос на показ папки или изображения (handling_input==True)
- Animation FX
    - теперь во время анимации зума можно перемещать изображение без глитчей
    - исправил косяк со снаппингом к значению 100% при увеличении или уменьшении, когда картинка могла застрять на значении 100% при увеличении, либо при уменьшении. **Вообще после внедрения в Boards фич от PureRef, надо будет переписать `do_scale_image`, потому что там костыль на костыле.** Для снапинга можно использовать ещё такую идею - не создавать новых анимационных тасок зума, если уже есть исполняющаяся таска зума и её конечное значение `image_scale` равно 1.0.
    - для анимации листания картинок (анимация `image_center_point`) хотел задать то же смещение, что используется для анимации зума, чтобы можно было перемещать мышкой картинку во время анимации. Но длительность этой анимации лишь одна десятая секунды, поэтому незачем это делать
    - теперь усиленное кручение колёсиком во время проигрывания анимации зума увеличивает силу этого зума, совсем как в Picasa Photo Viewer. Фича реализована через счётчик, который увеличивается на единицу, если новая анимационная таска начинает работать поверх отменённой незавершённой старой. Это цепное увеличение счётчика заканчивается только тогда, когда на момент создании новой таски не было работающих старых тасок с тем же `anim_id`.
- У окна настроек появился вертикальный кликабельный скроллбар
- BOARDS (интерактивный коллаж)
    - появилась возможность зумить только по одной из осей. Зажатый Ctrl и колесо мыши зумят по горизонтали, а зажатый Shift и всё то же колесо мыши зумят по вертикали. Нажатие на колесо возвращает картинку к однородному масштабу относительно текущей позиции курсора.
- Исправлег баг: при отображении во вьювере надписи «Загрузка» нажатие на кнопку закрытия не закрывало приложение сразу и даже после завершения загрузки
- Стояла такая таска: добавить команду вывода всех картинок с комментариями в html-страницу с самими комментариями поверх изображений, которые бы актвировались при наведении мышки. Выполнения этой таски уже не требуется, потому как внутри страницы «Библиотека» есть специальная папка для изображений с комментариями.
- Ряд истории просмотра и боковая панель тегов больше не появляются под курсором мыши, если окно не в фокусе
- Курсор мыши больше не меняется при пролёте над окном, если окно не активно (не в фокусе)
- BOARDS (интерактивный коллаж)
    - на доске отрисовывается сетка. Пока она сделана очень топорно и при сильном отдалении от картинок может лагать, но потом разлагивать, когда скроется. Потом надо будет переделать это всё на замощение через QBrush
    - добавлена минимапа, которую можно включить/выключить по нажатию клавиши M. Пока карта занимает весь экран, но потом может быть уменьшена. На карте отображаются фреймы изображений и их центры, точка начала координат и прямоугольник камеры, который может отображать масштаб и центр этой камеры.
    - изменена раскладка кнопок для панели управления. Теперь для каждой страницы программно можно определить свой набор кнопок и обработчиков кликов по ним
    - появилось собственное цикличное слайдшоу с поочерёдными перелётами и зумом. После нажатия на клавишу «Пробел» запускается анимация перелистывания каждой картинки на доске. После повторного нажатия пробела анимация останавливается. Также цикл может пройти по заранее проставленным точкам, выставленным через Ctrl+LMB. Если имеется хоть одна выставленная точка, то анимация пойдёт по точкам. ***Пока решил не создавать возможность на лету задавать колесом мыши величину скорости вплоть до полного разворота в противоположную сторону***
    - отрисовка сетки улучшена переходом с int на float. Улучшения касаются отображения сетки при анимации зума, то есть теперь линии не рябят при анимации.
    - реализована загрузка статического и анимационного контента айтема при появлении области айтема на экране. А превьюшки рисуются теперь при сильном отдалении
    - можно просматривать анимационные файлы покадрово. Кадры можно перелистывать через колесо мыши с зажатой правой кнопкой мыши. Если при зажатой правой кнопке работало колесо, то после отпускания кнопки мыши контекстное меню не появится.
- Отрефакторил многострадальный метод do_scale_image. Восстановил снаппинг к 100% при подходе с двух сторон, вернул клампинг в границах между 1% и по 10 000%. Проверил работу инструмента «Лупа», которая зависит от do_image_scale. Удалил настройку `legacy_image_scaling`. Убогая старая версия сохранена в файле meseum.py
- Пока рефакторил не особо полезную фичу DeepSecret, то нарвался на пару всратых багов в анимационном зуме и пришлось их исправлять:
    - во время анимации зума перемещение не работало адекватно и из-за этого картинку бесоёбило
    - перемещение глитчило, если после передвижения курсора мыши во время анимации зума держать зажатой кнопку мыши и не отпуская кнопки переместить курсор после окончания анимациии
    - во время анимации зума нельзя плавно зумировать из другой точки, сразу появляется скачок по смещению. Но этот скачок происходит только если во время анимации было произведено перемещение и как раз на величину перемещения
- Отрефакторил и исправил отображение фичи DeepSecret. Проблема была в том, что надпись скользила при увеличении, что разрушало эффект того, что надпись будто бы присутствует на самой картинке. Ещё активация надписи не срабатывала во время анимации зума и это было исправлено.
- Баг: после использования сочетания Ctrl+Shift отключается анимация напрочь, так быть не должно
- Вернул скорость зума к обычной. Дополнительно теперь скорость зума сбрасывается, если колесо начинает вращаться в другую сторону.
- Длительность анимации зума теперь задаётся в зависимости от скорости скролла. Чем выше скорость, тем длинее анимация.
- Пофиксил один краш и незагружающиеся svg-файлы на странице BOARDS. По этому случаю отмечу, что полезно бывает запустить анимацию перелистывания по всей странице, ибо если баги есть, то они сразу вылезут
- BOARDS:
    - появилась лупа как во вьювере, только пока работает через Shift+Клик, а не через Ctrl+Клик как во вьювере. Старым кодом повторно не удалось воспользоваться, копипаст и рефакторинг имён переменных спас ситуацию.
- Исправлен баг: в слайдшоу svg-файлы отображались в мыльном разрешении. Разрешение повышено
- Исправлен баг: в просмотре на странице библиотеки svg-файлы теперь тоже можно видеть в чётком разрешении
- Исправлен баг: задавая область комментария и выходя за рамку наблюдалось странное поведение рамки с отзеркаливанием её от границы картинки. Теперь это исправлено
- Исправлен баг и опечатка: невозможно было зумить доску (zoom) на странице BOARDS пока хотя бы раз не потаскал её в стороны мышкой (panning)
- BOARDS:
    - анимация пролёта по картинкам теперь начинается с той картинки, центр которой ближе к курсору мыши
    - починил отключение анимации пролёта при нажатии на «Пробел»
    - теперь при пролистывании анимационных файлов видно номер текущего фрейма (для этого курсор мыши должен находится над этой картинкой)
    - при переключении со страницы вьювера не пропадал центральный лейбл, отображающий масштабирование в процентах
    - организована выгрузка тех изображений, которые очень далеко отстоят от камеры. **Изначально хотелось начинать выгружать по количеству загруженных и вдобавок делать это рандомно, но пока сужу по расстоянию между центром камеры и центром картинки. Возможно, поздней надо будет сделать настройку для отключения этой фичи**
- Восстановлена работа функции «Перезапустить в обычном режиме»
- Исправлен баг: если произошёл краш в обычном режиме, то и перезапуск должен быть тоже в обычном режиме. Если крашнулось в упрощённом, то и перезапуск в упрощённом
- Комментирование:
    - юзер-френдли заголовок у диалога подтверждения удаления комента
    - при требовании перезадать границы комментария выводится подсказка-сообщение, о том, как можно начать перезадавать границы
- В коде данных md5-строки теперь сравниваются не напрямую, а посимвольно для верности
- В инфе каждого тега теперь прописывается не только md5-хэш изображения, но и размер файла
- Не писать в файл сессии виртуальную папку с комментами
- Записи в тегах теперь организованы по-другому - пути пишутся последними, потому что могут содержать пробелы, а пробел как раз и является разделитем полей в строке
- **Хотел было зарезервировать поля в файлах сессии, избранного, комментариев и файлах тегов. Это нужно было бы, чтобы потом не конвертировать сами файлы, чтобы при записи место для поля уже было занято. Однако я отказался от этого, ибо до релиза ещё далеко, и при надобности я смогу сделать конвертацию потом.**
- Папки избранного, изображений с коментами и изображений с конкретными тегами теперь называются виртуальными.
    - из виртуальных папок нельзя удалять изображения
    - виртуальные папки не прописываются в файле сессии
    - виртуальные папки нельзя обновить (то есть просканировать их заново)
    - нельзя удалить саму виртуальную папку из библиотеки
- BOARDS
    - клавиши Home и End центрируют вьюпорт на первой и последней картинке соответственно
- В библиотеке для виртуальных папок (комментарии, теги) созданы иконки
- Перерисована кнопка «Слайдшоу»
- BOARDS
    - можно гулять по доске нажимая Page Up и Page Down - в результате камера будет центрироваться на картинке
- Теперь папка новосозданного тега размещается в библиотеке следом за всеми тегами, а не в конец списка
- Переработан один из аспектов системы тегов - список тегов изображения больше не хранится в экземляре ImageData, теперь он хранится в специальной переменной главного окна, которая задаётся при загрузке изображения и обновляется при редактировании. Эта переработка убережёт от многих багов
- В упрощёном (лайтовом) режиме
    - отключен просчёт md5-хэшей, папки с большим количеством изображений стали грузится куда шустрей, даже можно сказать моментально
    - отключена отрисовка метаданных
    - отключена отрисовка комментариев
    - отключено обновление статуса кнопки "добавить в избранное"
    - отключена кнопка "добавить в избранное"
    - отрисовка библиотеки пофикшена для работы в упрощённом режиме
    - отключена загрузка всех виртуальных папок
    - отключена загрузка файла сессии
    - введён запрет на удаление папки на странице библиотеки, если папка в списке всего одна
    - удалена функция нахождения пропавших изображений в списке комментариев
    - переработано контекстное меню
    - отключены сочетания клавиш для вызова или создания тегов и комментариев
    - отключена боковая панель тегов
  - Хотел отключить историю просмотров, но потом передумал.
- Центральный лебл теперь отображается на всех страницах
- Клавиша «Esc» теперь ещё и чистит вывод сообщений, который происходит поверх изображения
- Добавлены клавиши для быстрого доступа к страницам (5 ноября 2023 уже не актуально)
    - `B`: Board Page
    - `L`: Library Page
    - `V`: Viewer Page
    - `Pause Break`: Start Page
- Отменил планы создания фичи, с помощью которой при открытии любой картинки во вьювере автматически проверялось, на является ли эта картинка потерянной, то есть в данный момент не доступа по пути, записанному в файле. Отмена связана с трудностью её воплощения в упрощённом режиме. Эта фича будет вынесена отдельно в специальную форму
- Слайдшоу: раньше при запуске выход на первую картинку начинался с затухания последней картинки. Теперь такого прикола нет и первая картинка появляется из пустоты как и должна.
- Слайдшоу: вместе с номером слайда отображается и имя файла
- Слайдшоу: теперь в слайдшоу можно увидеть и AVIF-файлы
- Починил отрисовку некликабельных скроллбаров на странице библиотеки
- Починил зум, работающий во вьювере через клавиши «Вверх» и «Вниз» для случая когда эти клавиши зажаты. Снапинг к 100% в этом случае уже не работает, и похуй, пусть так и останется.
- BOARDS
    - перемещение по доске теперь работает с зажатым колесом мыши, а не с зажатой левой кнопкой. Сброс масштаба - средняя кнопка мыши и зажатый Alt
- Поиск пропавших файлов по размеру в байтах и хэшу
    - добавлена форма для вывода информации о ходе процесса
    - **разработка приостановлена на момент 5 ноября 2023**
- Проделал R&D по виджетам трансформации и отрисовке трансформированного контента
    - после прочтения документации по QTransform выяснилось, что можно отрисовывать объекты в QPainter гибко задавая порядок трансформаций (скейл, поворот и перенос)
    - порядок трансформаций при отрисовке контента:
      - (1) скейл (2) поворот (3) перенос
      - чтобы сквошить, после поворота надо сделать ещё один скейл относительно осей мира или осей экрана, то есть не учитывая поворот
    - при повороте надо изменять значение поворота и корректировать положение центральной точки, если пивот не совпадает с ней
    - при скейле надо изменять значение скейла и корректировать положение центральной точки, если пивот не совпадает в ней
    - при повёрнутом виджете для скейла координаты точек оперируются в повёрнутой системе координат
    - пивот и центральная точка не совпадают, когда выделено больше чем один объект
    - входные данные:
        - позиция объекта, скейл по двум осям, поворот, координаты пивота (может совпадать с позицией объекта)
    - выходные данные:
        - позиция объекта, скейл по двум осям, поворот
- Лупа теперь вызывается с зажатым Alt, а не c зажатым Shift как раньше
- BOARDS
    - Виджет трансформации для каждого айтема на странице
        - выделение айтемов
            - функция создания полигона выделения
            - отрисовка полигона выделения
        - отрисовка контента и вспомогательной инфы согласно локальному скейлу, повороту и позиции
        - выделение айтемов
            - выделение прямоугольником и одиночным кликом
                - модификатор Shift для добавления айтемов к уже выделенным айтемам
                - выделение срабатывает и при кручении колеса мыши (зум)
        - !!! реализовано перемещение айтемов по доске БЕЗ СОЗДАНИЯ ВИДЖЕТА ТРАНСФОРМАЦИИ
            - область реакции для начала перемещения - вся область повёрнутого-масштабированного айтема
            - пришлось немного попотеть, чтобы совместить это с функцией выделения, сразу написать работающий код не получилось
                - баги: во время реализации переставал зажатый Shift при выделении айтемов одиночным кликом
            - особенность, заимствованная из PureRef: если кликается на невыделенном айтеме и есть другие выделенные айтемы, то с выделенных айтемов снимается выделение, а на невыделенный добавляется выделение и, если кнопка мыши остаётся зажатой, то активируется перенос
        - после выделения одиночным кликом левой кнопки мыши айтем начинает рисоваться на переднем плане
- Теперь даблклик по айтему на доске отображает айтем по центру в максимально возможном масштабе
    - вдобавок сделаны поправки к тому, что контент может скейлиться и поворачиваться
- Адаптация функций навигации к возможности поворачивать и скейлить айтемы
    - даблклик или клик по миниатюрке в панели управления (уже сделано в прошлом коммите)
    - первая и последняя через клавиши Home и End
    - листание через клавиши Page Up и Page Down
    - анимированное слайдшоу через клавишу Пробел
    - просчёт bounding_box всей доски
    - отрисовка минимапы
- Восстановление порядка изображений из-за перетасовки по причине выделения единичным кликом левой кнопкой мыши для использования в анимированном слайдшоу и прочих навигационных функциях
- BOARDS
    - Переосмыслил проект виджета трансформации. Теперь со вспомогательных контролов виджета не снимается инфа для позиционирования, масштабирования и ориентации объекта, завтра реализую новую задумку
    - виджет трансформации для каждого айтема на странице
        - начальная отрисовка совокупного объёма выделения айтемов
            - объём для одного айтема ориентирован по объекту, для группы айтемов не ориентирован
            - обновление координат объёма при перемещении выделенных айтемов, перемещении вьюпорта и зуме вьюпорта
        - все трансформации и преобразования выполнять в экранных координатах с поправкой на значение зума
        - отрисовка зон активации скейла айтема
        - отрисовка зон активации вращения айтема
        - вращение айтемов
            - группое и одиночное
            - пивотом служит центр совокупного объёма - все айтемы вращаются вокруг него; в одиночном не вращается, потому что радиус в этом случае нулевой
            - угол вращения используется для вращения позиции айтемов вокруг пивота и для вращения самих объектов вокруг их собственных центров
            - под конец вращения при отпускании кнопки мыши виджет переопределяется так, как это сделано в PureRef
            - модификатор Ctrl позволяет вращать выделенный айтем на углы, кратные 45 градусам. То же самое работает и для группового выделения
        - баг: виджет трансформации не появляется, если айтем начинают перетаскивать без предварительного выделения
        - скейл айтемов
            - непропорциональный скейл в этой программе возможен только для одного выделенного айтема, для группы выделенных айтемов скейл строго только пропорциональный, потому что айтемы внутри группы могут иметь разные ориентации из-за поворота, и не хочется с этим возиться, потому что оно мне и не надо
        - скейл айтемов (однородный, то есть пропорциональный и неоднородный)
            - думал насчёт схлопывания в ноль при скейле, и придумал задавать изначально малое значение для вьюпорта и обратно большое значение для масштаба контента, это должно помочь от схлопывания в ноль. При подходе к нулю надо ограничивать, не давать умножить на ноль совсем окончательно
            - четыре функции для обработки событий от мыши
            - основной код скейла для группы и для одного айтема, непропорциональный
            - обновление габаритов рамки виджета
            - пропорциональный скейл через shift для одного айтема для всех квадрантов вокруг пивота
            - для пропорционального скейла восстановлено правильное отзеркаливание во всех квадрантах вокруг пивота
            - пропорциональный скейл работает теперь для группы выделенных айтемов, aspect ratio вычисляется уже по размерам рамки выделения
            - эффект от зажатой клавиши shift теперь видно сразу, а не после перемещения мышки при зажатой клавише
            - введён модификатор alt для скейла от центра изображения
            - модификатор alt отключён для скейла группы выделенных айтемов, потому что он работает неправильно и не имеет смысла его исправлять
            - была идейка, что нужно ограничивать скейл минимальным значением, чтобы айтем не схлопнулся в ноль по обоим своим осям. Но сейчас у меня так и не получилось схлопнуть айтем в нулину, как я не старался. Идейка такая возникла из-за прошлого опыта, когда виджет в OXXXY слопывался в нулину. Но я вспомнил, что виджет схлопывался в нулину только потому что я использовал целочисленные значения для координат. Здесь же в этот раз такой тупизны не было допущено, вдобавок с виджета не снимается никакой инфы для трансформации айтмеа, и на виджет применяются те же трансформации, что и на сам айтем. Виджет трансформации нужен только для того, чтоба начать масштабирование или вращение, в остальном он просто отрисовывается.
                - Но на всякий случай я написал код, который ограничивает скейл минимальным значением, задаваемым в пикселях **и закомментировал его**. Посмотрим как всё пойдёт на деле.
                - Ещё пара мыслей насчёт решения проблемы: была идея задавать картинкам дефолтный масштаб в 100.0 по каждой из двух осей, а не 1.0, и начальное значение зума для вьюпорта выбирать обратное 1.0/100.0. Но раз я не смог схлопнуть объект в нулину вместе с виджетом, то пусть тогда эта идея останется в этом changelog-e.
                - В самом PureRef можно скейлить до талого, чтобы осталась только одна угловая точка от виджета, но если зазумить вьюпорт к этой точке, там появлялся объект с его родными габаритами, который можно было в свою очередь ещё раз уменьшить. И в конце концов, в один из моментов PureRef не давал уменшить изображение дальше. А у меня такого предохранителя не прописано, этот факт я и решил отметить здесь.
                - Ещё квадраты на углах виджета для активации вращения определяются через векторы, вычисляемые из координат углов прямоугольника виджета трансформации. Эти векторы из-за близкого к нулю масштаба айтема могут спокойно иметь нулевую длину и непонятно как тогда они будут отрисовываться. Лучше бы эти векторы надо было вычислять через переменную вращения и, наверняка ещё потребуется что-то типа aspect ratio. Но пока и так работает, поэтому пока я оставляю как есть.
            - ещё была идейка ограничить отрицательные проекции позиции курсора мыши (как это сделано в PureRef) на aspect-ratio-луч, который начинается в точке пивота и направлен в сторону центра айтема. Но я не стал это делать, потому что отрицательные проекции позволяют легко зеркалить те же картинки в айтемах.
            - так как ограничивать скейл я не стал, то я сделал так, чтобы в случае, когда угловые точки накладываются друг на друга, первой кликалась та угловая точка, которая при нулевом повороте находится справа внизу. Такой небольшой UX, ведь такие мелкие картинки заскейленные в точку я обычно скейлю обратно движением курсора мыши из левого верхнего угла в нижний правый угол
        - проведена проверка работы скейла и поворота айтемов (одиночное и групповое) с разным зумом вьюпорта
        - в процессе скейла айтемов теперь можно менять зум вьюпорта и всё происходящее на экране будет выглядеть адекватно
        - в процессе поворота айтемов теперь можно менять зум вьюпорта и всё происходящее на экране будет выглядеть адекватно
- BOARDS
    - нажатие на клавишу I прячет или показывает инфу об айтеме (например, имя файла и разрешение). Перед нажатием на клавишу надобно поместить курсор поверх айтема или выделить его
    - исправлен баг: svg-файлы загружаются на доску в очень мелком разрешении
    - Ctrl+A теперь выделяет все айтемы
    - введён запрет выделять айтемы во время работы функции пролёта по айтемам
    - рамка виджета трансформации сбрасывается при использовании навигационных функий, которые перемещают или зумят вьюпорт. При этом сбрасывается выделение с выделенных айтемов
    - bounding box всей доски обновляется после вращения или скейла айтемов. Это актуально для минимапы
    - в минимапе при наведении курсора на фрейм айтема показывается текстовое описание
    - восстановлена нормальная отрисовка инструмента Лупа (Ctrl+ЛКМ)
    - UX: клик по выделенному айтему с зажатым shift теперь снимает выделение с этого айтема
    - виджет трансформации теперь плавно затухает, если окно потеряло фокус и плавно появляется, если курсор мышки проносится над окном (как в PureRef)
    - заодно починил то, что испортил в предыдущем коммите: клик с Shift перестал выделять айтемы по одному, из-за того, что я не вспомнил, что выделением занимается не только функция `board_selection_callback`, а ещё и `any_item_area_under_mouse`
    - чтобы быстро перемещаться по доске, можно зайти в минимапу, затем навести на нужное место курсор мыши и нажать Enter на цифровой или текстовой клавиатуре
    - через Ctrl+C и Ctrl+V можно копировать выделенные айтемы. Выделенный айтем или группа айтемов встанут центром в ту точку, которую будет указывать курсор мыши
            - заодно пришлось отключить Ctrl+V для перехода на страницу вьювера; может стоит заменить их все на Shift
    - теперь функция выделения в первую очередь проверяет те айтемы, которые отрисовываются на переднем плане, и это избавляет от раздражающего бага, который проявляется когда один айтем перекрывает другой и в области перекрытия находится курсор
- Изменены шорткаты для быстрого доступа к страницам, теперь это цифры на клавиатуре
    - `1`: Start Page
    - `2`: Viewer Page
    - `3`: Board Page
    - `4`: Library Page
- Рефакторинг: избавлился от таймера в панели управления, теперь за всё отвечает таймер главного окна
- Пошаговое вращение в виджете трансформаций теперь работает более интуитивней
- У виджета трансформаций теперь появились курсоры для скейла и вращения. Каждый из них появляется, когда курсор находится в соотвествующей зоне
- Выделенные айтемы теперь обводятся рамкой цвета из PureRef, а не зелёным как раньше
- Теперь рамка виджета трансформации рисуется толще, чем рамка обводки выделенного айтема
- Отладочная графика виджета трансформации (зоны активации вращения, диагональ aspect_ratio, оси пивота) теперь отображается по запросу. Включить и выключить отладочную графику можно через пункт контестного меню
- Подправил код ориентации курсоров виджета трансформации, чтобы он работал так, как было задумано
- Рассмотрел похожий проект miro https://www.youtube.com/watch?v=m0iOExXL7yI
- BOARDS
    - введена настройка для показа компаса и уровень зума камеры на странице доски
    - введена настройка для показа точки начала координат на доске
    - введена настройка для показа сетки
- Переработан внешний вид окна настроек. Настроки сгруппированы



### 4й этап (31 октября 2023 - ????????)
- BOARDS
    - добавлен новый тип айтема - папка. Файлы в ней можно перелистывать тем же макаром, как и кадры в анимационных айтемах. Айтемы-папки добавляются через команду контекстного меню
        - появляется в центре экрана
        - забирает на себя всё выделение
        - при сканировании добавляются только поддерживаемые изображения
    - восстановлена работа минимапы после внедрения айтемов-папок
    - добавлен новый тип айтема - группа. То же самое, что и айтем-папка. Только она нужна для группировки изображений из текущей папки
    - добавлена возможность открывать изображение с выделенного айтема во второй копии приложения
    - пофиксил баг: рамка виджета при пошаговом повороте не вращалась на пошаговые значения как это делали выделенные айтемы
- исправлен глитч с воспроизведением анимации - кадры в гифке обновлялись только когда мышка елозила по окну
- добавлена настройка для задания размера области активации масштабирования и вращения у виджетра трансформации
- поправил работу зума во вьювере, чтобы колесо мыши не так сильно приближало/отдаляло при начальном кручении колеса. И всё равно мне не понравилось, как работает момент, когда дополнительно крутишь колесо во время анимированного зума: в таком случае все ещё остаются рывки
- рефакторинг: все длины между точками высчитываются теперь через QVector2D(a-b).length()
- рефакторинг: использовать QPainter.boundingBox() вместо самописных костылей
- избавился от клиент-сервера основанного на файле запроса и таймере
- BOARDS
    - айтемы-группы
        - их можно добавлять через контекстное меню
        - айтемы-НЕгруппы теперь можно выделить и перетащить на айтем-группу, в итоге они переместятся в этот айтем-группу
        - на минимапе теперь отображается индекс группы
- исправлен баг: при переключении страниц программа падает, если она была запущена без запроса показа папки или изображения
- исправлен краш: после нажатия кнопки Слайдшоу на панели управления, когда текущая папка пуста
- исправлен баг: панель управления не должна отобращаться на стартовой странице, если приложение запущено без запроса показа папки или изображения
- BOARDS
    - при перемещении выделенных айтемов в айтем-группу, выделенные айтемы становятся наполовину прозрачными при нахождении курсора мыши над группой и появляется надпись "добавить в группу"
- восстановлена анимация вьювера при запуске (anim_id = "image_transform_start"), которая слетела при правке бага недавно. Вдобавок отключена анимация ряда миниатюр, которая включилась некстати
- BOARDS
    - исправил краши с айтемами-папками и айтемами-группами в коде навигации по доске (дабл-клик, PageDown, PageUp, Home, End, Пробел)
    - баг: окружность компаса была залита чёрным цветом
    - "поддоски": ныряние в доску айтема (ITEM_FOLDER или ITEM_GROUP) и выныривание из неё. Можно было бы разворачивать группу или папку на всю доску, но это будет неудобно, потому что развёрнутый режим может перекрывать другие айтемы на доске
        - навести курсор на любой такой айтем и нажать Enter (цифровая клавиатура) или Return
        - ссылка на предыдущую доску сохраняется для возварата назад с помощью клавиши Backspace, во вьюпорте в левом верхнем углу отображается напоминание об этом
        - параметры доски копируются в память папки
- добавил настройки прозрачности для доски, вьювера и стартовой страницы в полноэкранном режиме
- в оконном режиме на заднем фоне теперь чёрный цвет, а не неприятный серый
- функция задания картинки для курсора не работала, если не была создана панель управления (актуально, когда первой показывалась библиотека или стартовая страница)
- BOARDS
    - надпись «Подожди» теперь сопрождается дополнительной надписью «создаются превьюшки»
    - теперь добавление айтема-папки сопровождает плашка на время загрузки данных
    - теперь можно добавлять айтемы-изображения через Ctrl+V из проводника
    - если айтем можно прокручивать, то теперь можно узнать что это за айтем - анимация, группа или папка
    - теперь доступно удаление выделенных айтемов с доски через клавишу Delete (в данный момент отменить это действие нельзя и истории действий как такой ещё нет)
    - добавлена переменная-ссылка на данные основной доски для досок айтемов-групп. Ещё предусмотрена ссылка на сам айтем. Теперь возможна дифференциация досок по этим ссылкам
- добавлена поддержка чтения .cur-файлов
